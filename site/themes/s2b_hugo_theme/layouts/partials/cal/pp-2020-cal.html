{{ partial "cal/pp-2020-themes.html" . }}

<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('fullcalendar');
  
    var calendar = new FullCalendar.Calendar(calendarEl, {
      plugins: [ 'dayGrid', 'timeGrid', 'list' ],
      defaultView: 'dayGridSixWeeks',
      contentHeight: 'auto',
      views: {
        dayGridSixWeeks: {
          type: 'dayGridMonth',
          duration: { weeks: 6 },
          buttonText: 'month'
        },
        listDaySixWeeks: {
          type: 'listDay',
          duration: { weeks: 6 },
          buttonText: 'list'
        }
      },
      listDayFormat: {
        month: 'short',
        year: 'numeric',
        day: 'numeric',
        weekday: 'short'
      },
      buttonText: {
        // dayGridSixWeeks defined in view, above
        // listDaySixWeeks defined in view, above
        listDay: 'day'
      },
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridSixWeeks,listDaySixWeeks,listDay'
      },
      noEventsMessage: "Open day — submit a theme at Pedalpalooza.org!",
      defaultDate: {{ .Param "startdate" }},
      validRange: {
        start: {{ .Param "startdate" }},
        end: {{ .Param "enddate" }}
      },
      nowIndicator: true,
      eventLimit: true,
      navLinks: true,
      eventSources: [
        {
          events: ppThemesData, // from pp-2020-themes.html
          allDayDefault: true,
          color: "#D34212",
          eventDataTransform: function( eventData ) {
            var event = {
                title: eventData.title,
                start: eventData.start,
                url: eventData.url
            };

            event.classNames = ["pedalpalooza"];
            if (eventData.cancelled == true) {
              event.classNames.push('cancelled');
            }

            return event;
          },
        }
      ]
    });
  
    calendar.render();
  });
</script>

<div id="fullcalendar"></div>

<!-- <p style="text-align: center; margin-top: 1.5em;">Got an idea? <a href="https://forms.gle/YdwYqnS2KAhCiC1Y8">Share a route!</a></p> -->
